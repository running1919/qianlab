<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAM9X25 Software Package: USB Device Hardware Access Layer</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">ATSAM9X25 Software Package 1.0</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>USB Device Hardware Access Layer<br/>
<small>
[<a class="el" href="group__usbd__lib.html">USB Device Framework</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p><div class="dynheader">
Collaboration diagram for USB Device Hardware Access Layer:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__usbd__hal.gif" border="0" alt="" usemap="#group____usbd____hal"/>
<map name="group____usbd____hal" id="group____usbd____hal">
<area shape="rect" id="node1" href="group__usbd__lib.html" title="USB Device Framework" alt="" coords="7,5,164,35"/><area shape="rect" id="node3" href="group__usbd__leds.html" title="USB Device LEDs" alt="" coords="497,5,623,35"/></map>
</td></tr></table></center>
</div>
</p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_transfer_header.html">TransferHeader</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_transfer.html">Transfer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mbl_transfer.html">MblTransfer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_endpoint.html">Endpoint</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_udphs_dma_descriptor.html">UdphsDmaDescriptor</a></td></tr>
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__leds.html">USB Device LEDs</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga137c9e7c0bc9e12f455df0a6e41c0287"></a><!-- doxytag: member="usbd_hal::DMA" ref="ga137c9e7c0bc9e12f455df0a6e41c0287" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DMA</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaa5f881a794f4e612b63750861ff9dc43">NUM_IT_MAX</a>&nbsp;&nbsp;&nbsp;(UDPHS-&gt;UDPHS_IPFEATURES &amp; UDPHS_IPFEATURES_EPT_NBR_MAX_Msk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga892015a6ce22d51cc09ee28ecceeb368">NUM_IT_MAX_DMA</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga71f704a7c8aaf4b17965e2e55917e986">SHIFT_DMA</a>&nbsp;&nbsp;&nbsp;24</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga1a3966a3e34cf6f45d5c49158a47370b">SHIFT_INTERUPT</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga74fb9f0009ae61530ac99e19744fc7f1">DMA_MAX_FIFO_SIZE</a>&nbsp;&nbsp;&nbsp;(65536/1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga19e18c1683b682fc01056cbf2b2b92f6">EPT_VIRTUAL_SIZE</a>&nbsp;&nbsp;&nbsp;16384</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga1fab52c7032d2314d73ced9188dce52f">UDPHS_ENDPOINT_DISABLED</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga54f28f8061173dba5b54970d732f3016">UDPHS_ENDPOINT_HALTED</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga4042f4c27fb1a59fa4e837a179f9cec1">UDPHS_ENDPOINT_IDLE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga761fbc08534b1b3308ddd4897e1dd4bd">UDPHS_ENDPOINT_SENDING</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga57bdba8e2cf76761b4d9a1aebff63a54">UDPHS_ENDPOINT_RECEIVING</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga84adc62db8c2e90f323b2b0a802df0a4">UDPHS_ENDPOINT_SENDINGM</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga318439ae43fc0f1f83cc4c61f22b50b3">UDPHS_ENDPOINT_RECEIVINGM</a>&nbsp;&nbsp;&nbsp;6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga58081bc990ddb9737252e5794b703850">MBL_NbBuffer</a>(i, o, <a class="el" href="bmp_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>)&nbsp;&nbsp;&nbsp;(((i)&gt;(o))?((i)-(o)):((i)+(<a class="el" href="bmp_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>)-(o)))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaefb1ead0b778081953b1a3dabca312c4">MBL_FULL</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga7fea9931b5288124d11803122002ac70">MBL_NULL</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga51c1ba9d0b7d1e090a6ae2baa275b63d">bmEP</a>(bEP)&nbsp;&nbsp;&nbsp;(1 &lt;&lt; (bEP))</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga571a674fe9f9a1bba6ad08b3b0b28a80">USBD_IrqHandler</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaa9aba8ccdad2272b61db48b43466043b">USBD_HAL_ResetEPs</a> (uint32_t bmEPs, uint8_t <a class="el" href="cciddriver_8h.html#ac87a621b6b29f2322c10bf0e0ee7e471">bStatus</a>, uint8_t bKeepCfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset endpoints and disable them.</p>
<ol type="1">
<li>Terminate transfer if there is any, with given status;</li>
<li>Reset the endpoint &amp; disable it. </li>
</ol>
 <a href="#gaa9aba8ccdad2272b61db48b43466043b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaac15d66e72d7daa9d05116370a36aa91">USBD_HAL_CancelIo</a> (uint32_t bmEPs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaf17d4fe67932fa6a5dcc05f4c6d611ff">USBD_HAL_ConfigureEP</a> (const USBEndpointDescriptor *pDescriptor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gafcb94bdd4c0ea327621a187814ab4f9f">USBD_HAL_SetTransferCallback</a> (uint8_t bEP, <a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a> fCallback, void *pCbData)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga62263446ee46cfc2ca48856e446f1a79">USBD_HAL_SetupMblTransfer</a> (uint8_t bEndpoint, <a class="el" href="struct_u_s_b_d_transfer_buffer.html">USBDTransferBuffer</a> *pMbList, uint16_t mblSize, uint16_t startOffset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gab8293616e390cb94e93529673367acb4">USBD_HAL_Write</a> (uint8_t bEndpoint, const void *pData, uint32_t dLength)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga8ebf6dcf09581aa66fbfc89862516e60">USBD_HAL_WrWithHdr</a> (uint8_t bEndpoint, const void *pHdr, uint8_t bHdrLen, const void *pData, uint32_t dLength)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga1c6c76201a5c49c7e40c60c8dbdeae68">USBD_HAL_Read</a> (uint8_t bEndpoint, void *pData, uint32_t dLength)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga214508a8f0f824cdcf40bca9ddac10f6">USBD_HAL_Connect</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable Pull-up, connect.  <a href="#ga214508a8f0f824cdcf40bca9ddac10f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gaded744daaee15b55f41fb2175f343b69">USBD_HAL_Disconnect</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable Pull-up, disconnect.  <a href="#gaded744daaee15b55f41fb2175f343b69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga24f5a47f6815de571752ba22c98073f5">USBD_HAL_RemoteWakeUp</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gac8a317bd985d2ab3d3b82d093015379e">USBD_HAL_SetAddress</a> (uint8_t address)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga05c8714f0e31ed119a4ab594d687691a">USBD_HAL_SetConfiguration</a> (uint8_t cfgnum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga3699059b9b9b52b7e55af6d070a7fe61">USBD_HAL_Init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gad95d239687843031e2af3aac51ba33ad">USBD_HAL_Stall</a> (uint8_t bEP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga1a1fd7ed1af2be8e202879458a6cfda7">USBD_HAL_Halt</a> (uint8_t bEndpoint, uint8_t ctl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga946b2d10dfc497b6b24e602be6f3bd05">USBD_HAL_IsHighSpeed</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#gab80a4355417d88e290c88c233d5d435b">USBD_HAL_Suspend</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga72c29d7c5767f5af8df7ba1603a02619">USBD_HAL_Activate</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hal.html#ga3c996a1e96701350e2c298521b7f8630">USBD_HAL_Test</a> (uint8_t bIndex)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Defines all structures and symbols for USB device hardware interface. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga51c1ba9d0b7d1e090a6ae2baa275b63d"></a><!-- doxytag: member="USBD_HAL.h::bmEP" ref="ga51c1ba9d0b7d1e090a6ae2baa275b63d" args="(bEP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bmEP</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">bEP</td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; (bEP))</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get bitmap for an endpoint </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8h_source.html#l00064">64</a> of file <a class="el" href="_u_s_b_d___h_a_l_8h_source.html">USBD_HAL.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga74fb9f0009ae61530ac99e19744fc7f1"></a><!-- doxytag: member="USBD_HAL.c::DMA_MAX_FIFO_SIZE" ref="ga74fb9f0009ae61530ac99e19744fc7f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMA_MAX_FIFO_SIZE&nbsp;&nbsp;&nbsp;(65536/1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Max size of the FMA FIFO </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00076">76</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga19e18c1683b682fc01056cbf2b2b92f6"></a><!-- doxytag: member="USBD_HAL.c::EPT_VIRTUAL_SIZE" ref="ga19e18c1683b682fc01056cbf2b2b92f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EPT_VIRTUAL_SIZE&nbsp;&nbsp;&nbsp;16384</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fifo space size in DW </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00078">78</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaefb1ead0b778081953b1a3dabca312c4"></a><!-- doxytag: member="USBD_HAL.c::MBL_FULL" ref="gaefb1ead0b778081953b1a3dabca312c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBL_FULL&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Buffer list is full </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00118">118</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga58081bc990ddb9737252e5794b703850"></a><!-- doxytag: member="USBD_HAL.c::MBL_NbBuffer" ref="ga58081bc990ddb9737252e5794b703850" args="(i, o, size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBL_NbBuffer</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">o, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"><a class="el" href="bmp_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;(((i)&gt;(o))?((i)-(o)):((i)+(<a class="el" href="bmp_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>)-(o)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get Number of buffer in Multi-Buffer-List </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>i</em>&nbsp;</td><td>input index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>output index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>list size </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00115">115</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7fea9931b5288124d11803122002ac70"></a><!-- doxytag: member="USBD_HAL.c::MBL_NULL" ref="ga7fea9931b5288124d11803122002ac70" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBL_NULL&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Buffer list is null </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00120">120</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa5f881a794f4e612b63750861ff9dc43"></a><!-- doxytag: member="USBD_HAL.c::NUM_IT_MAX" ref="gaa5f881a794f4e612b63750861ff9dc43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_IT_MAX&nbsp;&nbsp;&nbsp;(UDPHS-&gt;UDPHS_IPFEATURES &amp; UDPHS_IPFEATURES_EPT_NBR_MAX_Msk)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of endpoints interrupts. </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00063">63</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga892015a6ce22d51cc09ee28ecceeb368"></a><!-- doxytag: member="USBD_HAL.c::NUM_IT_MAX_DMA" ref="ga892015a6ce22d51cc09ee28ecceeb368" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_IT_MAX_DMA</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<a class="code" href="group___a_t91_s_a_m9_g15__base.html#ga2f46da6b552c7e644a1be9930deca653" title="(UDPHS ) Base Address">UDPHS</a>-&gt;UDPHS_IPFEATURES \
        &amp; UDPHS_IPFEATURES_DMA_CHANNEL_NBR_Msk) \
      &gt;&gt;UDPHS_IPFEATURES_DMA_CHANNEL_NBR_Pos)
</pre></div><p>Maximum number of endpoint DMA interrupts </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00066">66</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga71f704a7c8aaf4b17965e2e55917e986"></a><!-- doxytag: member="USBD_HAL.c::SHIFT_DMA" ref="ga71f704a7c8aaf4b17965e2e55917e986" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHIFT_DMA&nbsp;&nbsp;&nbsp;24</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bits that should be shifted to access DMA control bits. </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00071">71</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a3966a3e34cf6f45d5c49158a47370b"></a><!-- doxytag: member="USBD_HAL.c::SHIFT_INTERUPT" ref="ga1a3966a3e34cf6f45d5c49158a47370b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHIFT_INTERUPT&nbsp;&nbsp;&nbsp;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bits that should be shifted to access interrupt bits. </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00073">73</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1fab52c7032d2314d73ced9188dce52f"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_DISABLED" ref="ga1fab52c7032d2314d73ced9188dce52f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_DISABLED&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<h2><a class="anchor" id="endpoint_states_sec"></a>
"UDP Endpoint states"</h2>
<p>This page lists the endpoint states.</p>
<h3><a class="anchor" id="States"></a>
States</h3>
<ul>
<li>UDPHS_ENDPOINT_DISABLED</li>
<li>UDPHS_ENDPOINT_HALTED</li>
<li>UDPHS_ENDPOINT_IDLE</li>
<li>UDPHS_ENDPOINT_SENDING</li>
<li>UDPHS_ENDPOINT_RECEIVING</li>
<li>UDPHS_ENDPOINT_SENDINGM</li>
<li>UDPHS_ENDPOINT_RECEIVINGM <a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is disabled </li>
</ul>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00096">96</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga54f28f8061173dba5b54970d732f3016"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_HALTED" ref="ga54f28f8061173dba5b54970d732f3016" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_HALTED&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is halted (i.e. STALLs every request) </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00098">98</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4042f4c27fb1a59fa4e837a179f9cec1"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_IDLE" ref="ga4042f4c27fb1a59fa4e837a179f9cec1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_IDLE&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is idle (i.e. ready for transmission) </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00100">100</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga57bdba8e2cf76761b4d9a1aebff63a54"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_RECEIVING" ref="ga57bdba8e2cf76761b4d9a1aebff63a54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_RECEIVING&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is receiving data </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00104">104</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga318439ae43fc0f1f83cc4c61f22b50b3"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_RECEIVINGM" ref="ga318439ae43fc0f1f83cc4c61f22b50b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_RECEIVINGM&nbsp;&nbsp;&nbsp;6</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is receiving MBL </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00108">108</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga761fbc08534b1b3308ddd4897e1dd4bd"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_SENDING" ref="ga761fbc08534b1b3308ddd4897e1dd4bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_SENDING&nbsp;&nbsp;&nbsp;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is sending data </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00102">102</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga84adc62db8c2e90f323b2b0a802df0a4"></a><!-- doxytag: member="USBD_HAL.c::UDPHS_ENDPOINT_SENDINGM" ref="ga84adc62db8c2e90f323b2b0a802df0a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UDPHS_ENDPOINT_SENDINGM&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="struct_endpoint.html">Endpoint</a> states: <a class="el" href="struct_endpoint.html">Endpoint</a> is sending MBL </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l00106">106</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga72c29d7c5767f5af8df7ba1603a02619"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Activate" ref="ga72c29d7c5767f5af8df7ba1603a02619" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Activate </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Activate USB Device HW Interface</p>
<ol type="1">
<li>Enable USB Peripheral</li>
<li>Enable USB Clock</li>
<li>Enable transceiver </li>
</ol>

</div>
</div>
<a class="anchor" id="gaac15d66e72d7daa9d05116370a36aa91"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_CancelIo" ref="gaac15d66e72d7daa9d05116370a36aa91" args="(uint32_t bmEPs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_CancelIo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>bmEPs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancel pending READ/WRITE </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bmEPs</em>&nbsp;</td><td>Bitmap for endpoints to reset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>EP callback is invoked with USBD_STATUS_CANCELED. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf17d4fe67932fa6a5dcc05f4c6d611ff"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_ConfigureEP" ref="gaf17d4fe67932fa6a5dcc05f4c6d611ff" args="(const USBEndpointDescriptor *pDescriptor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_ConfigureEP </td>
          <td>(</td>
          <td class="paramtype">const USBEndpointDescriptor *&nbsp;</td>
          <td class="paramname"> <em>pDescriptor</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Configures an endpoint according to its endpoint Descriptor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pDescriptor</em>&nbsp;</td><td>Pointer to an endpoint descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The endpoint address. </dd></dl>

</div>
</div>
<a class="anchor" id="ga214508a8f0f824cdcf40bca9ddac10f6"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Connect" ref="ga214508a8f0f824cdcf40bca9ddac10f6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Connect </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable Pull-up, connect. </p>
<ol type="1">
<li>Enable HW access if needed</li>
<li>Enable Pull-Up</li>
<li>Disable HW access if needed </li>
</ol>

</div>
</div>
<a class="anchor" id="gaded744daaee15b55f41fb2175f343b69"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Disconnect" ref="gaded744daaee15b55f41fb2175f343b69" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Disconnect </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable Pull-up, disconnect. </p>
<ol type="1">
<li>Enable HW access if needed</li>
<li>Disable PULL-Up</li>
<li>Disable HW access if needed </li>
</ol>

</div>
</div>
<a class="anchor" id="ga1a1fd7ed1af2be8e202879458a6cfda7"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Halt" ref="ga1a1fd7ed1af2be8e202879458a6cfda7" args="(uint8_t bEndpoint, uint8_t ctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_Halt </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEndpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>ctl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets/Clear/Get the HALT state on the endpoint. In HALT state, the endpoint should keep stalling any packet. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEndpoint</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ctl</em>&nbsp;</td><td>Control code CLR/HALT/READ. 0: Clear HALT state; 1: Set HALT state; .: Return HALT status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_INVALID_PARAMETER if endpoint not exist, otherwise endpoint halt status. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3699059b9b9b52b7e55af6d070a7fe61"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Init" ref="ga3699059b9b9b52b7e55af6d070a7fe61" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the USB HW Access driver. </p>

</div>
</div>
<a class="anchor" id="ga946b2d10dfc497b6b24e602be6f3bd05"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_IsHighSpeed" ref="ga946b2d10dfc497b6b24e602be6f3bd05" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_IsHighSpeed </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Indicates if the device is running in high or full-speed. Always returns 0 since UDP does not support high-speed mode. </p>

</div>
</div>
<a class="anchor" id="ga1c6c76201a5c49c7e40c60c8dbdeae68"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Read" ref="ga1c6c76201a5c49c7e40c60c8dbdeae68" args="(uint8_t bEndpoint, void *pData, uint32_t dLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_Read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEndpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads incoming data on an USB endpoint This methods sets the transfer descriptor and activate the endpoint interrupt. The actual transfer is then carried out by the endpoint interrupt handler. The Read operation finishes either when the buffer is full, or a short packet (inferior to endpoint maximum size) is received.</p>
<p>*The buffer must be kept allocated until the transfer is finished*. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEndpoint</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pData</em>&nbsp;</td><td>Pointer to a data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dLength</em>&nbsp;</td><td>Size of the data buffer in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_SUCCESS if the read operation has been started; otherwise, the corresponding error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga24f5a47f6815de571752ba22c98073f5"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_RemoteWakeUp" ref="ga24f5a47f6815de571752ba22c98073f5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_RemoteWakeUp </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Starts a remote wake-up procedure. </p>

</div>
</div>
<a class="anchor" id="gaa9aba8ccdad2272b61db48b43466043b"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_ResetEPs" ref="gaa9aba8ccdad2272b61db48b43466043b" args="(uint32_t bmEPs, uint8_t bStatus, uint8_t bKeepCfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_ResetEPs </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>bmEPs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bStatus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bKeepCfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset endpoints and disable them.</p>
<ol type="1">
<li>Terminate transfer if there is any, with given status;</li>
<li>Reset the endpoint &amp; disable it. </li>
</ol>
</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bmEPs</em>&nbsp;</td><td>Bitmap for endpoints to reset. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bStatus</em>&nbsp;</td><td>Status passed to terminate transfer on endpoint. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bKeepCfg</em>&nbsp;</td><td>1 to keep old endpoint configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Use <a class="el" href="group__usbd__hal.html#gaf17d4fe67932fa6a5dcc05f4c6d611ff">USBD_HAL_ConfigureEP()</a> to configure and enable endpoint if not keeping old configuration. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__usbd__hal.html#gaf17d4fe67932fa6a5dcc05f4c6d611ff">USBD_HAL_ConfigureEP()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gac8a317bd985d2ab3d3b82d093015379e"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_SetAddress" ref="gac8a317bd985d2ab3d3b82d093015379e" args="(uint8_t address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_SetAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>address</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the device address to the given value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>New device address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga05c8714f0e31ed119a4ab594d687691a"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_SetConfiguration" ref="ga05c8714f0e31ed119a4ab594d687691a" args="(uint8_t cfgnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_SetConfiguration </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>cfgnum</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the current device configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cfgnum</em>&nbsp;</td><td>- Configuration number to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gafcb94bdd4c0ea327621a187814ab4f9f"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_SetTransferCallback" ref="gafcb94bdd4c0ea327621a187814ab4f9f" args="(uint8_t bEP, TransferCallback fCallback, void *pCbData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_SetTransferCallback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a>&nbsp;</td>
          <td class="paramname"> <em>fCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pCbData</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set callback for a USB endpoint for transfer (read/write).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEP</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fCallback</em>&nbsp;</td><td>Optional callback function to invoke when the transfer is complete. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pCbData</em>&nbsp;</td><td>Optional pointer to data to the callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_SUCCESS or USBD_STATUS_LOCKED if endpoint is busy. </dd></dl>

</div>
</div>
<a class="anchor" id="ga62263446ee46cfc2ca48856e446f1a79"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_SetupMblTransfer" ref="ga62263446ee46cfc2ca48856e446f1a79" args="(uint8_t bEndpoint, USBDTransferBuffer *pMbList, uint16_t mblSize, uint16_t startOffset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_SetupMblTransfer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEndpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_u_s_b_d_transfer_buffer.html">USBDTransferBuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>pMbList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>mblSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>startOffset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Configure an endpoint to use multi-buffer-list transfer mode. The buffers can be added by _Read/_Write function. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMbList</em>&nbsp;</td><td>Pointer to a multi-buffer list used, NULL to disable MBL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mblSize</em>&nbsp;</td><td>Multi-buffer list size (number of buffers can be queued) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>startOffset</em>&nbsp;</td><td>When number of buffer achieve this offset transfer start </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad95d239687843031e2af3aac51ba33ad"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Stall" ref="gad95d239687843031e2af3aac51ba33ad" args="(uint8_t bEP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_Stall </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEP</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Causes the given endpoint to acknowledge the next packet it receives with a STALL handshake except setup request. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEP</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_SUCCESS or USBD_STATUS_LOCKED. </dd></dl>

</div>
</div>
<a class="anchor" id="gab80a4355417d88e290c88c233d5d435b"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Suspend" ref="gab80a4355417d88e290c88c233d5d435b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Suspend </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Suspend USB Device HW Interface</p>
<ol type="1">
<li>Disable transceiver</li>
<li>Disable USB Clock</li>
<li>Disable USB Peripheral </li>
</ol>

</div>
</div>
<a class="anchor" id="ga3c996a1e96701350e2c298521b7f8630"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Test" ref="ga3c996a1e96701350e2c298521b7f8630" args="(uint8_t bIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HAL_Test </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bIndex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Certification test for High Speed device. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bIndex</em>&nbsp;</td><td>Test to be done </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab8293616e390cb94e93529673367acb4"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_Write" ref="gab8293616e390cb94e93529673367acb4" args="(uint8_t bEndpoint, const void *pData, uint32_t dLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_Write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEndpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends data through a USB endpoint. Sets up the transfer descriptor, writes one or two data payloads (depending on the number of FIFO bank for the endpoint) and then starts the actual transfer. The operation is complete when all the data has been sent.</p>
<p>*If the size of the buffer is greater than the size of the endpoint (or twice the size if the endpoint has two FIFO banks), then the buffer must be kept allocated until the transfer is finished*. This means that it is not possible to declare it on the stack (i.e. as a local variable of a function which returns after starting a transfer).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEndpoint</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pData</em>&nbsp;</td><td>Pointer to a buffer with the data to send. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dLength</em>&nbsp;</td><td>Size of the data buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_SUCCESS if the transfer has been started; otherwise, the corresponding error status code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8ebf6dcf09581aa66fbfc89862516e60"></a><!-- doxytag: member="USBD_HAL.c::USBD_HAL_WrWithHdr" ref="ga8ebf6dcf09581aa66fbfc89862516e60" args="(uint8_t bEndpoint, const void *pHdr, uint8_t bHdrLen, const void *pData, uint32_t dLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBD_HAL_WrWithHdr </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bEndpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>pHdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bHdrLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>dLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Special write function. Sends data through a USB endpoint. Sets up the transfer descriptor, writes header and one or two data payloads (depending on the number of FIFO bank for the endpoint) and then starts the actual transfer. The operation is complete when all the data has been sent.</p>
<p>*If the size of the buffer is greater than the size of the endpoint (or twice the size if the endpoint has two FIFO banks), then the buffer must be kept allocated until the transfer is finished*. This means that it is not possible to declare it on the stack (i.e. as a local variable of a function which returns after starting a transfer).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bEndpoint</em>&nbsp;</td><td><a class="el" href="struct_endpoint.html">Endpoint</a> number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pData</em>&nbsp;</td><td>Pointer to a buffer with the data to send. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dLength</em>&nbsp;</td><td>Size of the data buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>USBD_STATUS_SUCCESS if the transfer has been started; otherwise, the corresponding error status code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga571a674fe9f9a1bba6ad08b3b0b28a80"></a><!-- doxytag: member="USBD_HAL.c::USBD_IrqHandler" ref="ga571a674fe9f9a1bba6ad08b3b0b28a80" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_IrqHandler </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>USBD (UDP) interrupt handler Manages device resume, suspend, end of bus reset. Forwards endpoint events to the appropriate handler. </p>

<p>Definition at line <a class="el" href="_u_s_b_d___h_a_l_8c_source.html#l01120">1120</a> of file <a class="el" href="_u_s_b_d___h_a_l_8c_source.html">USBD_HAL.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usbd__hal_ga571a674fe9f9a1bba6ad08b3b0b28a80_cgraph.gif" border="0" usemap="#group__usbd__hal_ga571a674fe9f9a1bba6ad08b3b0b28a80_cgraph" alt=""/></div>
<map name="group__usbd__hal_ga571a674fe9f9a1bba6ad08b3b0b28a80_cgraph" id="group__usbd__hal_ga571a674fe9f9a1bba6ad08b3b0b28a80_cgraph">
<area shape="rect" id="node3" href="group__usbd__hal.html#ga946b2d10dfc497b6b24e602be6f3bd05" title="USBD_HAL_IsHighSpeed" alt="" coords="176,59,347,88"/><area shape="rect" id="node5" href="group__usbd__interface.html#gad1bf93dee935f232cc0acae8cac8f264" title="USBD_ResetHandler" alt="" coords="191,112,332,141"/><area shape="rect" id="node15" href="group__usbd__interface.html#ga5931e8b51cc0a708c654a2ede474722a" title="USBD_ResumeHandler" alt="" coords="183,165,340,195"/><area shape="rect" id="node20" href="group__usbd__interface.html#ga522cddda5972d92b3c974e6fc8c58956" title="USBD_SuspendHandler" alt="" coords="181,272,341,301"/><area shape="rect" id="node7" href="group__usbd__interface.html#ga026b2622df8f7dfc8b8b510e76a05365" title="USBD_ConfigureEndpoint" alt="" coords="403,5,573,35"/><area shape="rect" id="node9" href="group__usbd__hal.html#ga72c29d7c5767f5af8df7ba1603a02619" title="USBD_HAL_Activate" alt="" coords="417,165,559,195"/><area shape="rect" id="node11" href="group__usbd__hal.html#gaa9aba8ccdad2272b61db48b43466043b" title="Reset endpoints and disable them.Terminate transfer if there is any, with given status;Reset the endp..." alt="" coords="411,59,565,88"/><area shape="rect" id="node13" href="group__usbd__interface.html#ga9e41562d2721787dbca41dd5bd574fb3" title="USBDCallbacks_Reset" alt="" coords="411,112,565,141"/><area shape="rect" id="node18" href="group__usbd__interface.html#gac077464ce6090a99a999031ee2b43abc" title="USBDCallbacks_Resumed" alt="" coords="400,219,576,248"/><area shape="rect" id="node22" href="group__usbd__hal.html#gab80a4355417d88e290c88c233d5d435b" title="USBD_HAL_Suspend" alt="" coords="415,272,561,301"/><area shape="rect" id="node24" href="group__usbd__interface.html#gaf30332628067d1dd8cd1a177f5dc66ac" title="USBDCallbacks_Suspended" alt="" coords="395,325,581,355"/></map>
</div>
</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
