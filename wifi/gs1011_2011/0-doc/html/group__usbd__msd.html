<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAM9X25 Software Package: USB Massstorage Device Driver</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">ATSAM9X25 Software Package 1.0</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>USB Massstorage Device Driver<br/>
<small>
[<a class="el" href="group__usbd__class.html">USB Device Classes Drivers</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p><div class="dynheader">
Collaboration diagram for USB Massstorage Device Driver:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__usbd__msd.gif" border="0" alt="" usemap="#group____usbd____msd"/>
<map name="group____usbd____msd" id="group____usbd____msd">
<area shape="rect" id="node1" href="group__usbd__msd__subclass.html" title="MSD Subclass Codes" alt="" coords="519,5,668,35"/><area shape="rect" id="node2" href="group__usbd__sbc__secse__codes.html" title="SBC Sense Response Codes" alt="" coords="497,59,689,88"/><area shape="rect" id="node3" href="group__usbd__msd__cbw__def.html" title="MSD CBW Definitions" alt="" coords="519,112,668,141"/><area shape="rect" id="node4" href="group__usbd__class.html" title="USB Device Classes Drivers" alt="" coords="7,485,191,515"/><area shape="rect" id="node5" href="group__usbd__sbc__periph__quali.html" title="SBC Periph. Qualifiers" alt="" coords="517,165,669,195"/><area shape="rect" id="node6" href="group__usbd__msd__endian__macros.html" title="MSD Endian Macros" alt="" coords="523,219,664,248"/><area shape="rect" id="node7" href="group__usbd__msd__driver__result__codes.html" title="MSD Driver Result Codes" alt="" coords="509,272,677,301"/><area shape="rect" id="node8" href="group__usbd__msd__protocol__codes.html" title="MSD Protocol Codes" alt="" coords="521,325,665,355"/><area shape="rect" id="node9" href="group__usbd__sbc__periph__types.html" title="SBC Periph. Types" alt="" coords="527,379,660,408"/><area shape="rect" id="node10" href="group__usbd__sbc__sense__additionals.html" title="SBC Sense Additionals" alt="" coords="515,432,672,461"/><area shape="rect" id="node11" href="group__usbd__msd__device__descriptor__ids.html" title="MSD Device Descriptor IDs" alt="" coords="504,485,683,515"/><area shape="rect" id="node12" href="group__usbd__sbc__command__state.html" title="SBC Command States" alt="" coords="516,539,671,568"/><area shape="rect" id="node14" href="group__usbd__general__config.html" title="USBD General Configure" alt="" coords="511,592,676,621"/><area shape="rect" id="node15" href="group__usbd__msd__driver__xfr__directions.html" title="MSD Driver Xfr Directions" alt="" coords="511,645,676,675"/><area shape="rect" id="node16" href="group__usbd__msd__driver__possible__states.html" title="MSD Driver Possible states" alt="" coords="503,699,684,728"/><area shape="rect" id="node17" href="group__usbd__msd__driver__action__cases.html" title="MSD Driver Action Cases" alt="" coords="509,752,677,781"/><area shape="rect" id="node18" href="group__usbd__sbc__operation__codes.html" title="SBC Operation Codes" alt="" coords="519,805,668,835"/><area shape="rect" id="node19" href="group__usbd__msdd__config.html" title="USB MassStorage Configure" alt="" coords="500,859,687,888"/><area shape="rect" id="node20" href="group__usbd__msd__csw__def.html" title="MSD CSW Definitions" alt="" coords="519,912,668,941"/><area shape="rect" id="node21" href="group__usbd__sbc__sense__keys.html" title="SBC Sense Keys" alt="" coords="532,965,655,995"/></map>
</td></tr></table></center>
</div>
</p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_parse_data.html">MSDParseData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_cbw.html">MSCbw</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_csw.html">MSCsw</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___m_s_d_configuration_descriptors.html">_MSDConfigurationDescriptors</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___m_s_d_configuration_descriptors_o_t_g.html">_MSDConfigurationDescriptorsOTG</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_transfer.html">MSDTransfer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_command_state.html">MSDCommandState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_driver.html">MSDDriver</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_i_o_fifo.html">PMSDIOFifo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">FIFO buffer for READ/WRITE (disk) operation of a mass storage device.  <a href="struct_m_s_d_i_o_fifo.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LUN structure.  <a href="struct_m_s_d_lun.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_inquiry.html">_SBCInquiry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_inquiry_data.html">_SBCInquiryData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_read10.html">_SBCRead10</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_b_c_read_capacity10.html">SBCReadCapacity10</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_b_c_read_capacity10_data.html">SBCReadCapacity10Data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_b_c_request_sense.html">SBCRequestSense</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_b_c_request_sense_data.html">SBCRequestSenseData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_test_unit_ready.html">_SBCTestUnitReady</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SBCTestUnitReady Data structure for the TEST UNIT READY command.  <a href="struct___s_b_c_test_unit_ready.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_b_c_write10.html">SBCWrite10</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_medium_removal.html">_SBCMediumRemoval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_mode_sense6.html">_SBCModeSense6</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_mode_parameter_header6.html">_SBCModeParameterHeader6</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_informational_exceptions_control.html">_SBCInformationalExceptionsControl</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_b_c_read_write_error_recovery.html">_SBCReadWriteErrorRecovery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="union_s_b_c_command.html">SBCCommand</a></td></tr>
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__general__config.html">USBD General Configure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msdd__config.html">USB MassStorage Configure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__device__descriptor__ids.html">MSD Device Descriptor IDs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__subclass.html">MSD Subclass Codes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__protocol__codes.html">MSD Protocol Codes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__cbw__def.html">MSD CBW Definitions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__csw__def.html">MSD CSW Definitions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__driver__possible__states.html">MSD Driver Possible states</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__driver__result__codes.html">MSD Driver Result Codes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__driver__action__cases.html">MSD Driver Action Cases</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__driver__xfr__directions.html">MSD Driver Xfr Directions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__operation__codes.html">SBC Operation Codes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__periph__quali.html">SBC Periph. Qualifiers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__periph__types.html">SBC Periph. Types</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__secse__codes.html">SBC Sense Response Codes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__sense__keys.html">SBC Sense Keys</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__sense__additionals.html">SBC Sense Additionals</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd__endian__macros.html">MSD Endian Macros</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__sbc__command__state.html">SBC Command States</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(a, b)&nbsp;&nbsp;&nbsp;((a &lt; b) ? a : b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga88ad7c3615be60b0de0bd9b868eabf0d">DEFAULT_LUN_BLOCK_SIZE</a>&nbsp;&nbsp;&nbsp;512</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga73efc8e5f6c52233931de0f792e4d44f">MSD_BULK_ONLY_RESET</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga058396b6f11778e38488216afe4535f9">MSD_GET_MAX_LUN</a>&nbsp;&nbsp;&nbsp;0xFE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gabc9e375ccb765294f0c34c1e491ea235">MSDIO_IDLE</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga3b3ebac54e5cd2ebe56df2425973cef1">MSDIO_START</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gaa3f195df999f46ee03bd946c87667be3">MSDIO_WAIT</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga850f49aa6ca2cfc21f18197d5ad415ac">MSDIO_NEXT</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gaf32a4212021960c2617812d21eee7f94">MSDIO_PAUSE</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga75b6f30b2ccbe61e959a2493236c6bb6">MSDIO_ABORT</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga9793bbace74601c1f3d366d00b965ecd">MSDIO_DONE</a>&nbsp;&nbsp;&nbsp;6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga2b352a9201c842f2f5c4617869ea28a4">MSDIO_ERROR</a>&nbsp;&nbsp;&nbsp;7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gae6aab0e7b6b4ed7a5cb7ff4736c01450">MSDIO_READ10_CHUNK_SIZE</a>&nbsp;&nbsp;&nbsp;(4*512)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga151785544a5aadbb2547384e3db8a6a1"></a><!-- doxytag: member="usbd_msd::MSDIO_WRITE10_CHUNK_SIZE" ref="ga151785544a5aadbb2547384e3db8a6a1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MSDIO_WRITE10_CHUNK_SIZE</b>&nbsp;&nbsp;&nbsp;(4*512)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MSDIOFifo_IncNdx</b>(ndx, sectSize, bufSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2bee784885eede5311a9aeb574bdc25a"></a><!-- doxytag: member="usbd_msd::MED_STATUS_SUCCESS" ref="ga2bee784885eede5311a9aeb574bdc25a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_STATUS_SUCCESS</b>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga14b96d34d6d4467303b8df8c2bb0b846"></a><!-- doxytag: member="usbd_msd::MED_STATE_READY" ref="ga14b96d34d6d4467303b8df8c2bb0b846" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_STATE_READY</b>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1ebdf6c1c924798bf4e0fbe4c7ba9973"></a><!-- doxytag: member="usbd_msd::MED_STATE_BUSY" ref="ga1ebdf6c1c924798bf4e0fbe4c7ba9973" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_STATE_BUSY</b>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gaa2e3beccadbf24e3dace7e6ce87d6833">LUN_STATUS_SUCCESS</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gae7de66649877359f888c22120cef02e6">LUN_STATUS_ERROR</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga8c00e4aa0ca9ddf02eed964985d20d17">LUN_NOT_PRESENT</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga813d6be81e1a7efa0d874376f5be6960">LUN_EJECTED</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga62ae52efc0c28233c82120a00ff0929e">LUN_CHANGED</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga7f505dc4dc815d9c00f4bf45215a5bff">LUN_TRANS_READY</a>&nbsp;&nbsp;&nbsp;LUN_CHANGED</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga8e4c7bd61d8f3a7f8f7a95d0927ebdad">LUN_READY</a>&nbsp;&nbsp;&nbsp;0x11</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga59a72faa2e6668562b83b4a3671c4544">SBC_SPC_VERSION_4</a>&nbsp;&nbsp;&nbsp;0x06</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Version value for the SBC-3 specification.  <a href="#ga59a72faa2e6668562b83b4a3671c4544"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga3bb206d0754049b55a619551bebc291a">SBC_TPGS_NONE</a>&nbsp;&nbsp;&nbsp;0x0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Values for the TPGS field returned in INQUIRY data.  <a href="#ga3bb206d0754049b55a619551bebc291a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga432939e03f94f45838e6f1c7655f0ed0"></a><!-- doxytag: member="usbd_msd::SBC_TPGS_ASYMMETRIC" ref="ga432939e03f94f45838e6f1c7655f0ed0" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_TPGS_ASYMMETRIC</b>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf1f5df8119e93b86779ce9e2b7eace88"></a><!-- doxytag: member="usbd_msd::SBC_TPGS_SYMMETRIC" ref="gaf1f5df8119e93b86779ce9e2b7eace88" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_TPGS_SYMMETRIC</b>&nbsp;&nbsp;&nbsp;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2a2060f6bc7d9eb4b29f9414b1ad8e85"></a><!-- doxytag: member="usbd_msd::SBC_TPGS_BOTH" ref="ga2a2060f6bc7d9eb4b29f9414b1ad8e85" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_TPGS_BOTH</b>&nbsp;&nbsp;&nbsp;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gab903bf701bddd0f88bbbe6e5863956d2">SBC_VERSION_DESCRIPTOR_SBC_3</a>&nbsp;&nbsp;&nbsp;0x04C0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Version descriptor value for the SBC-3 specification.  <a href="#gab903bf701bddd0f88bbbe6e5863956d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga28c01bfb597324856a95fcc752984c8f">SBC_MEDIUM_TYPE_DIRECT_ACCESS_BLOCK_DEVICE</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MEDIUM TYPE field value for direct-access block devices.  <a href="#ga28c01bfb597324856a95fcc752984c8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga5f558f8a8933fdb43888fcfd5eaf071d">SBC_MRIE_NO_REPORTING</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MRIE field values.  <a href="#ga5f558f8a8933fdb43888fcfd5eaf071d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9abc7547eee7b3a8f8f37a8c61a98409"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_ASYNCHRONOUS" ref="ga9abc7547eee7b3a8f8f37a8c61a98409" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_ASYNCHRONOUS</b>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4cf09874feda25fad44312c7b8514665"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_GENERATE_UNIT_ATTENTION" ref="ga4cf09874feda25fad44312c7b8514665" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_GENERATE_UNIT_ATTENTION</b>&nbsp;&nbsp;&nbsp;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab62dfdfd1f3b3e05324c7425be4f0a78"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_COND_GENERATE_RECOVERED_ERROR" ref="gab62dfdfd1f3b3e05324c7425be4f0a78" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_COND_GENERATE_RECOVERED_ERROR</b>&nbsp;&nbsp;&nbsp;0x03</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6a721470fd2ce7d9a1428840d7f516b7"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_UNCOND_GENERATE_RECOVERED_ERROR" ref="ga6a721470fd2ce7d9a1428840d7f516b7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_UNCOND_GENERATE_RECOVERED_ERROR</b>&nbsp;&nbsp;&nbsp;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa88a4a4c1bf1f19f969a8fdb9fb9a59f"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_GENERATE_NO_SENSE" ref="gaa88a4a4c1bf1f19f969a8fdb9fb9a59f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_GENERATE_NO_SENSE</b>&nbsp;&nbsp;&nbsp;0x05</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad14b256b75c667069a5ff24bdab2a514"></a><!-- doxytag: member="usbd_msd::SBC_MRIE_ON_REQUEST" ref="gad14b256b75c667069a5ff24bdab2a514" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_MRIE_ON_REQUEST</b>&nbsp;&nbsp;&nbsp;0x06</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga62a502a991d32f35c3093faf1e2c4630">SBC_PAGE_READ_WRITE_ERROR_RECOVERY</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Supported mode pages.  <a href="#ga62a502a991d32f35c3093faf1e2c4630"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac50958810a8d30038f835e141187211c"></a><!-- doxytag: member="usbd_msd::SBC_PAGE_INFORMATIONAL_EXCEPTIONS_CONTROL" ref="gac50958810a8d30038f835e141187211c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_PAGE_INFORMATIONAL_EXCEPTIONS_CONTROL</b>&nbsp;&nbsp;&nbsp;0x1C</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga201fe8b5a07cb6ee0cc48ec2a199d4f7"></a><!-- doxytag: member="usbd_msd::SBC_PAGE_RETURN_ALL" ref="ga201fe8b5a07cb6ee0cc48ec2a199d4f7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_PAGE_RETURN_ALL</b>&nbsp;&nbsp;&nbsp;0x3F</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad8b67e8e6acb10013c6babac7a7ca19c"></a><!-- doxytag: member="usbd_msd::SBC_PAGE_VENDOR_SPECIFIC" ref="gad8b67e8e6acb10013c6babac7a7ca19c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SBC_PAGE_VENDOR_SPECIFIC</b>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0160407efa2b129cf406c2e7f45663ab"></a><!-- doxytag: member="usbd_msd::fMEDCallback" ref="ga0160407efa2b129cf406c2e7f45663ab" args=")(void *pArg, uint8_t bStatus, uint32_t dwTransferred, uint32_t dwRemaining)" -->
typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><b>fMEDCallback</b> )(void *pArg, uint8_t <a class="el" href="cciddriver_8h.html#ac87a621b6b29f2322c10bf0e0ee7e471">bStatus</a>, uint32_t dwTransferred, uint32_t dwRemaining)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gac0c948a0057a9d762eeadbf0c778773f">MSDLunDataMonitorFunction</a> )(uint8_t flowDirection, uint32_t dataLength, uint32_t fifoNullCount, uint32_t fifoFullCount)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga77b4a730be820934b4e637afa14e6fef">MSDDriver_Initialize</a> (const <a class="el" href="struct_u_s_b_d_driver_descriptors.html">USBDDriverDescriptors</a> *pDescriptors, <a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *pLuns, unsigned char numLuns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gabfb0d71b88e4e5606d3de432127e9d01">MSDDriver_ConfigurationChangeHandler</a> (uint8_t cfgnum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga3fc749f879c284f631bce181e7cfe0eb">MSDDriver_RequestHandler</a> (const <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> *request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gac202c092099685d21ac19320311b1d0f">MSDD_StateMachine</a> (<a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> *pMsdDriver)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga462b4263f13e5235a2bedceeaece01cb">MSDFunction_Initialize</a> (<a class="el" href="struct_u_s_b_d_driver.html">USBDDriver</a> *pUsbd, uint8_t bInterfaceNb, <a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *pLuns, uint8_t numLuns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gafb1268e0849907894c708ccc4ab46fee">MSDFunction_Configure</a> (USBGenericDescriptor *pDescriptors, uint16_t <a class="el" href="cciddriver_8h.html#a55a47c2a6a3fa5637afd238bb57a2dd4">wLength</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gaa87efba32c907fa095c6f8797d2580db">MSDFunction_RequestHandler</a> (const <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> *request)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga33a2494c76dcc7335a458c79e46975d9">MSDFunction_StateMachine</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gaa0225cbda7cc32f11ff4702cee87e80a">MSDIOFifo_Init</a> (<a class="el" href="struct_m_s_d_i_o_fifo.html">MSDIOFifo</a> *pFifo, void *<a class="el" href="usart__serial_2main_8c.html#aabcf6e8b1303ef001b5da6bdead0efc6">pBuffer</a>, unsigned short bufferSize)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a <a class="el" href="struct_m_s_d_i_o_fifo.html" title="FIFO buffer for READ/WRITE (disk) operation of a mass storage device.">MSDIOFifo</a> instance.  <a href="#gaa0225cbda7cc32f11ff4702cee87e80a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga981eaed135b3f42473e62d27ac92f33c">LUN_Init</a> (<a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun, void *media, uint8_t *ioBuffer, uint32_t ioBufferSize, uint32_t baseAddress, uint32_t <a class="el" href="bmp_8h.html#ab2c6b258f02add8fdf4cfc7c371dd772">size</a>, uint16_t blockSize, uint8_t protected, void(*dataMonitor)(uint8_t flowDirection, uint32_tdataLength, uint32_tfifoNullCount, uint32_tfifoFullCount))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a LUN instance. Must be invoked at least once even no Media is linked.  <a href="#ga981eaed135b3f42473e62d27ac92f33c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga1de5a07c184adfb07755a5db1eca7d2e">LUN_Eject</a> (<a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Eject the media from a LUN.  <a href="#ga1de5a07c184adfb07755a5db1eca7d2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#gafc350a85607c66c7e8ceb616ef18c6fa">LUN_Write</a> (<a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun, uint32_t blockAddress, void *<a class="el" href="_c_d_c_d_serial_driver_8h.html#a8be237b72619ea84bbc9f5d314b2696c">data</a>, uint32_t length, <a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a> callback, void *argument)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes data on the a LUN starting at the specified block address.  <a href="#gafc350a85607c66c7e8ceb616ef18c6fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga1e7757d9187b0f6cc8ea8d503928b909">LUN_Read</a> (<a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun, uint32_t blockAddress, void *<a class="el" href="_c_d_c_d_serial_driver_8h.html#a8be237b72619ea84bbc9f5d314b2696c">data</a>, uint32_t length, <a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a> callback, void *argument)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads data from a LUN, starting at the specified block address.  <a href="#ga1e7757d9187b0f6cc8ea8d503928b909"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga6259d674a30286b49d79ffa89b44e809">SBC_UpdateSenseData</a> (<a class="el" href="struct_s_b_c_request_sense_data.html">SBCRequestSenseData</a> *requestSenseData, unsigned char senseKey, unsigned char additionalSenseCode, unsigned char additionalSenseCodeQualifier)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the sense data of a LUN with the given key and codes.  <a href="#ga6259d674a30286b49d79ffa89b44e809"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga2a08f011fbfff2f3a419b28bb6d14b16">SBC_GetCommandInformation</a> (void *command, unsigned int *length, unsigned char *<a class="el" href="bmp_8h.html#acb5cfd209ba75c853d03f701e7f91679">type</a>, <a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return information about the transfer length and direction expected by the device for a particular command.  <a href="#ga2a08f011fbfff2f3a419b28bb6d14b16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga64df1e5184c755694de288f6c5dc0dc0">SBC_ProcessCommand</a> (<a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *lun, <a class="el" href="struct_m_s_d_command_state.html">MSDCommandState</a> *commandState)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes a SBC command by dispatching it to a subfunction.  <a href="#ga64df1e5184c755694de288f6c5dc0dc0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct___m_s_d_configuration_descriptors.html">_MSDConfigurationDescriptors</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga927fb25b67f10112f2ffeec03d27f0d9">__attribute__</a> ((packed)) SBCTestUnitReady</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SBCTestUnitReady Data structure for the TEST UNIT READY command.  <a href="#ga927fb25b67f10112f2ffeec03d27f0d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa5ed4de61630e1143e85a4c352ab467d"></a><!-- doxytag: member="usbd_msd::MSDDriver_Initialize" ref="gaa5ed4de61630e1143e85a4c352ab467d" args="(const USBDDriverDescriptors *pDescriptors, MSDLun *luns, uint8_t numLuns)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>MSDDriver_Initialize</b> (const <a class="el" href="struct_u_s_b_d_driver_descriptors.html">USBDDriverDescriptors</a> *pDescriptors, <a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *<a class="el" href="usb_2usb__massstorage_2main_8c.html#a38874206d3a43e92efeb82e827031cbb">luns</a>, uint8_t numLuns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad18555120a738777ca87a6c6a45fc43b"></a><!-- doxytag: member="usbd_msd::MED_IsMappedRDSupported" ref="gad18555120a738777ca87a6c6a45fc43b" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_IsMappedRDSupported</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae549ae32f073c7a21e57599edd3abc37"></a><!-- doxytag: member="usbd_msd::MED_IsMappedWRSupported" ref="gae549ae32f073c7a21e57599edd3abc37" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_IsMappedWRSupported</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafeb7ba2e26fafad5775d2016bb16859b"></a><!-- doxytag: member="usbd_msd::MED_GetMappedAddress" ref="gafeb7ba2e26fafad5775d2016bb16859b" args="(void *pMed, uint32_t dwBlk)" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_GetMappedAddress</b> (void *pMed, uint32_t dwBlk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga867474ae7cc0e0cda18beb42ccbf894a"></a><!-- doxytag: member="usbd_msd::MED_IsBusy" ref="ga867474ae7cc0e0cda18beb42ccbf894a" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_IsBusy</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga761b94f274dc5a85acd20c0b33089d17"></a><!-- doxytag: member="usbd_msd::MED_IsProtected" ref="ga761b94f274dc5a85acd20c0b33089d17" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_IsProtected</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gade89a430e561d4e82d34aabe4f51b248"></a><!-- doxytag: member="usbd_msd::MED_GetState" ref="gade89a430e561d4e82d34aabe4f51b248" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_GetState</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5944997ebb6926907d5c9d86e63b9fcf"></a><!-- doxytag: member="usbd_msd::MED_GetBlockSize" ref="ga5944997ebb6926907d5c9d86e63b9fcf" args="(void *pMed)" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_GetBlockSize</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga48387b2d0f9f8c461b9ba339639ac406"></a><!-- doxytag: member="usbd_msd::MED_GetSize" ref="ga48387b2d0f9f8c461b9ba339639ac406" args="(void *pMed)" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_GetSize</b> (void *pMed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1e0f572223cf7f7147d5618dab7b0d9e"></a><!-- doxytag: member="usbd_msd::MED_Write" ref="ga1e0f572223cf7f7147d5618dab7b0d9e" args="(void *pMed, uint32_t dwAddr, void *pData, uint32_t dwLen, fMEDCallback fCallback, void *pArg)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_Write</b> (void *pMed, uint32_t dwAddr, void *pData, uint32_t dwLen, fMEDCallback fCallback, void *pArg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafb7485df0b9484b2e9dd4fb0988a2d48"></a><!-- doxytag: member="usbd_msd::MED_Read" ref="gafb7485df0b9484b2e9dd4fb0988a2d48" args="(void *pMed, uint32_t dwAddr, void *pData, uint32_t dwLen, fMEDCallback fCallback, void *pArg)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_Read</b> (void *pMed, uint32_t dwAddr, void *pData, uint32_t dwLen, fMEDCallback fCallback, void *pArg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae372dfa8bac0695097922c875723b861"></a><!-- doxytag: member="usbd_msd::MED_Flush" ref="gae372dfa8bac0695097922c875723b861" args="(void *pMed)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>MED_Flush</b> (void *pMed)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_u_s_b_d_driver_descriptors.html">USBDDriverDescriptors</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__msd.html#ga82b351721c0ee88c194279f372c96b19">msdDriverDescriptors</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implement a single interface device with single MS function in.</p>
<p>Implements Massstorage Function for USB device. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga88ad7c3615be60b0de0bd9b868eabf0d"></a><!-- doxytag: member="MSDLun.c::DEFAULT_LUN_BLOCK_SIZE" ref="ga88ad7c3615be60b0de0bd9b868eabf0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LUN_BLOCK_SIZE&nbsp;&nbsp;&nbsp;512</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Default LUN block size in bytes </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8c_source.html#l00049">49</a> of file <a class="el" href="_m_s_d_lun_8c_source.html">MSDLun.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga62ae52efc0c28233c82120a00ff0929e"></a><!-- doxytag: member="MSDLun.h::LUN_CHANGED" ref="ga62ae52efc0c28233c82120a00ff0929e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_CHANGED&nbsp;&nbsp;&nbsp;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Media of LUN is changed </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00112">112</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga813d6be81e1a7efa0d874376f5be6960"></a><!-- doxytag: member="MSDLun.h::LUN_EJECTED" ref="ga813d6be81e1a7efa0d874376f5be6960" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_EJECTED&nbsp;&nbsp;&nbsp;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LUN is ejected by host </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00110">110</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8c00e4aa0ca9ddf02eed964985d20d17"></a><!-- doxytag: member="MSDLun.h::LUN_NOT_PRESENT" ref="ga8c00e4aa0ca9ddf02eed964985d20d17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_NOT_PRESENT&nbsp;&nbsp;&nbsp;0x00</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Media of LUN is removed </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00108">108</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e4c7bd61d8f3a7f8f7a95d0927ebdad"></a><!-- doxytag: member="MSDLun.h::LUN_READY" ref="ga8e4c7bd61d8f3a7f8f7a95d0927ebdad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_READY&nbsp;&nbsp;&nbsp;0x11</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Media of LUN is ready </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00116">116</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae7de66649877359f888c22120cef02e6"></a><!-- doxytag: member="MSDLun.h::LUN_STATUS_ERROR" ref="gae7de66649877359f888c22120cef02e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_STATUS_ERROR&nbsp;&nbsp;&nbsp;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LUN RC: error </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00105">105</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa2e3beccadbf24e3dace7e6ce87d6833"></a><!-- doxytag: member="MSDLun.h::LUN_STATUS_SUCCESS" ref="gaa2e3beccadbf24e3dace7e6ce87d6833" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_STATUS_SUCCESS&nbsp;&nbsp;&nbsp;0x00</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LUN RC: success </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00103">103</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7f505dc4dc815d9c00f4bf45215a5bff"></a><!-- doxytag: member="MSDLun.h::LUN_TRANS_READY" ref="ga7f505dc4dc815d9c00f4bf45215a5bff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUN_TRANS_READY&nbsp;&nbsp;&nbsp;LUN_CHANGED</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LUN Not Ready to Ready transition </p>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00114">114</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3acffbd305ee72dcd4593c0d8af64a4f"></a><!-- doxytag: member="USBDDriverDescriptors.c::MIN" ref="ga3acffbd305ee72dcd4593c0d8af64a4f" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">b</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;((a &lt; b) ? a : b)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the minimum between two values. </p>

<p>Definition at line <a class="el" href="usb__massstorage_2_u_s_b_d_driver_descriptors_8c_source.html#l00094">94</a> of file <a class="el" href="usb__massstorage_2_u_s_b_d_driver_descriptors_8c_source.html">USBDDriverDescriptors.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga73efc8e5f6c52233931de0f792e4d44f"></a><!-- doxytag: member="MSD.h::MSD_BULK_ONLY_RESET" ref="ga73efc8e5f6c52233931de0f792e4d44f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSD_BULK_ONLY_RESET&nbsp;&nbsp;&nbsp;0xFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset the mass storage device and its associated interface. </p>

<p>Definition at line <a class="el" href="_m_s_d_8h_source.html#l00080">80</a> of file <a class="el" href="_m_s_d_8h_source.html">MSD.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga058396b6f11778e38488216afe4535f9"></a><!-- doxytag: member="MSD.h::MSD_GET_MAX_LUN" ref="ga058396b6f11778e38488216afe4535f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSD_GET_MAX_LUN&nbsp;&nbsp;&nbsp;0xFE</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the maximum LUN number supported by the device. </p>

<p>Definition at line <a class="el" href="_m_s_d_8h_source.html#l00082">82</a> of file <a class="el" href="_m_s_d_8h_source.html">MSD.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga75b6f30b2ccbe61e959a2493236c6bb6"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_ABORT" ref="ga75b6f30b2ccbe61e959a2493236c6bb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_ABORT&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Abort, to abort the process </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00057">57</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9793bbace74601c1f3d366d00b965ecd"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_DONE" ref="ga9793bbace74601c1f3d366d00b965ecd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_DONE&nbsp;&nbsp;&nbsp;6</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Done, finish without error </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00059">59</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2b352a9201c842f2f5c4617869ea28a4"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_ERROR" ref="ga2b352a9201c842f2f5c4617869ea28a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_ERROR&nbsp;&nbsp;&nbsp;7</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Error, any error happens </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00061">61</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabc9e375ccb765294f0c34c1e491ea235"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_IDLE" ref="gabc9e375ccb765294f0c34c1e491ea235" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_IDLE&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Idle state, do nothing </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00047">47</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga850f49aa6ca2cfc21f18197d5ad415ac"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_NEXT" ref="ga850f49aa6ca2cfc21f18197d5ad415ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_NEXT&nbsp;&nbsp;&nbsp;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Next, to check if the next block can be performed </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00053">53</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf32a4212021960c2617812d21eee7f94"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_PAUSE" ref="gaf32a4212021960c2617812d21eee7f94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_PAUSE&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pause, to pause the process for buffer full or null </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00055">55</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae6aab0e7b6b4ed7a5cb7ff4736c01450"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_READ10_CHUNK_SIZE" ref="gae6aab0e7b6b4ed7a5cb7ff4736c01450" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_READ10_CHUNK_SIZE&nbsp;&nbsp;&nbsp;(4*512)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>FIFO offset before USB transmit start FIFO trunk size (in each transfer, large amount of data) </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00069">69</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3b3ebac54e5cd2ebe56df2425973cef1"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_START" ref="ga3b3ebac54e5cd2ebe56df2425973cef1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_START&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start, to start IO operation </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00049">49</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa3f195df999f46ee03bd946c87667be3"></a><!-- doxytag: member="MSDIOFifo.h::MSDIO_WAIT" ref="gaa3f195df999f46ee03bd946c87667be3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIO_WAIT&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait, waiting for IO operation done </p>

<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00051">51</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab6f2982e14b67f3e8297a0db911e2df6"></a><!-- doxytag: member="MSDIOFifo.h::MSDIOFifo_IncNdx" ref="gab6f2982e14b67f3e8297a0db911e2df6" args="(ndx, sectSize, bufSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSDIOFifo_IncNdx</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">ndx, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">sectSize, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">bufSize</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> ((ndx) &gt;= (bufSize) - (sectSize)) (ndx) = 0; \
    <span class="keywordflow">else</span> (ndx) += (sectSize)
</pre></div>
<p>Definition at line <a class="el" href="_m_s_d_i_o_fifo_8h_source.html#l00128">128</a> of file <a class="el" href="_m_s_d_i_o_fifo_8h_source.html">MSDIOFifo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga28c01bfb597324856a95fcc752984c8f"></a><!-- doxytag: member="SBC.h::SBC_MEDIUM_TYPE_DIRECT_ACCESS_BLOCK_DEVICE" ref="ga28c01bfb597324856a95fcc752984c8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_MEDIUM_TYPE_DIRECT_ACCESS_BLOCK_DEVICE&nbsp;&nbsp;&nbsp;0x00</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MEDIUM TYPE field value for direct-access block devices. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>sbc3r06.pdf - Section 6.3.1 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00289">289</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5f558f8a8933fdb43888fcfd5eaf071d"></a><!-- doxytag: member="SBC.h::SBC_MRIE_NO_REPORTING" ref="ga5f558f8a8933fdb43888fcfd5eaf071d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_MRIE_NO_REPORTING&nbsp;&nbsp;&nbsp;0x00</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MRIE field values. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>sbc3r06.pdf - Section 7.4.11 - Table 286 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00295">295</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga62a502a991d32f35c3093faf1e2c4630"></a><!-- doxytag: member="SBC.h::SBC_PAGE_READ_WRITE_ERROR_RECOVERY" ref="ga62a502a991d32f35c3093faf1e2c4630" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_PAGE_READ_WRITE_ERROR_RECOVERY&nbsp;&nbsp;&nbsp;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Supported mode pages. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>sbc3r06.pdf - Section 6.3.1 - Table 115 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00307">307</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga59a72faa2e6668562b83b4a3671c4544"></a><!-- doxytag: member="SBC.h::SBC_SPC_VERSION_4" ref="ga59a72faa2e6668562b83b4a3671c4544" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_SPC_VERSION_4&nbsp;&nbsp;&nbsp;0x06</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Version value for the SBC-3 specification. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>spc4r06.pdf - Section 6.4.2 - Table 85 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00167">167</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3bb206d0754049b55a619551bebc291a"></a><!-- doxytag: member="SBC.h::SBC_TPGS_NONE" ref="ga3bb206d0754049b55a619551bebc291a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_TPGS_NONE&nbsp;&nbsp;&nbsp;0x0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Values for the TPGS field returned in INQUIRY data. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>spc4r06.pdf - Section 6.4.2 - Table 86 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00173">173</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab903bf701bddd0f88bbbe6e5863956d2"></a><!-- doxytag: member="SBC.h::SBC_VERSION_DESCRIPTOR_SBC_3" ref="gab903bf701bddd0f88bbbe6e5863956d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SBC_VERSION_DESCRIPTOR_SBC_3&nbsp;&nbsp;&nbsp;0x04C0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Version descriptor value for the SBC-3 specification. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>spc4r06.pdf - Section 6.4.2 - Table 87 </dd></dl>

<p>Definition at line <a class="el" href="_s_b_c_8h_source.html#l00182">182</a> of file <a class="el" href="_s_b_c_8h_source.html">SBC.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gac0c948a0057a9d762eeadbf0c778773f"></a><!-- doxytag: member="MSDLun.h::MSDLunDataMonitorFunction" ref="gac0c948a0057a9d762eeadbf0c778773f" args=")(uint8_t flowDirection, uint32_t dataLength, uint32_t fifoNullCount, uint32_t fifoFullCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__usbd__msd.html#gac0c948a0057a9d762eeadbf0c778773f">MSDLunDataMonitorFunction</a>)(uint8_t flowDirection, uint32_t dataLength, uint32_t fifoNullCount, uint32_t fifoFullCount)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mass storage device data flow monitor function type </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flowDirection</em>&nbsp;</td><td>1 - device to host (READ10) 0 - host to device (WRITE10) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataLength</em>&nbsp;</td><td>Length of data transferred in bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fifoNullCount</em>&nbsp;</td><td>Times that FIFO is NULL to wait </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fifoFullCount</em>&nbsp;</td><td>Times that FIFO is filled to wait </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_m_s_d_lun_8h_source.html#l00129">129</a> of file <a class="el" href="_m_s_d_lun_8h_source.html">MSDLun.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga927fb25b67f10112f2ffeec03d27f0d9"></a><!-- doxytag: member="MSDDriver.h::__attribute__" ref="ga927fb25b67f10112f2ffeec03d27f0d9" args="((packed)) SBCTestUnitReady" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct___m_s_d_configuration_descriptors.html">_MSDConfigurationDescriptors</a> __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(packed)&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>SBCTestUnitReady Data structure for the TEST UNIT READY command. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>spc4r06.pdf - Section 6.34 - Table 192</dd></dl>
<p>Ethernet header structure</p>
<p>ARP header structure</p>
<p>IP Header structure</p>
<p>ICMP echo header structure</p>
<p>Ethernet packet structure</p>
<p>SBCTestUnitReady Data structure for the TEST UNIT READY command.</p>
<p>BMP (Windows) File Header Format</p>
<p>BMP (Windows 2.x) Header</p>
<p>BMP (Windows 3.x) Header, 40 bytes</p>
<p>BMP (Windows 95, V4) Header, 108 bytes</p>
<p>BMP (Windows) Header Format</p>
<p>Ethernet header structure</p>
<p>ARP header structure</p>
<p>IP Header structure</p>
<p>ICMP echo header structure</p>
<p>Ethernet packet structure </p>

<p><p>Standard USB device driver instance</p>
<p>CCID message</p>
<p>CCID command</p>
<p>Interrupt message answer</p>
<p>Buffer data of message</p>
<p>Protocol used</p>
<p>SlotStatus</p>
<p>Bit 0 = Slot 0 current state</p>
<p>Bit 1 = Slot 0 changed status</p>
<p>Bit 2 = Slot 1 current state</p>
<p>Bit 3 = Slot 1 changed status</p>
<p>Bit 4 = Slot 2 current state</p>
<p>Bit 5 = Slot 2 changed status </p>
</p>

</div>
</div>
<a class="anchor" id="ga1de5a07c184adfb07755a5db1eca7d2e"></a><!-- doxytag: member="MSDLun.c::LUN_Eject" ref="ga1de5a07c184adfb07755a5db1eca7d2e" args="(MSDLun *lun)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LUN_Eject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Eject the media from a LUN. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to the <a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> instance to initialize </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Operation result code </dd></dl>

</div>
</div>
<a class="anchor" id="ga981eaed135b3f42473e62d27ac92f33c"></a><!-- doxytag: member="MSDLun.c::LUN_Init" ref="ga981eaed135b3f42473e62d27ac92f33c" args="(MSDLun *lun, void *media, uint8_t *ioBuffer, uint32_t ioBufferSize, uint32_t baseAddress, uint32_t size, uint16_t blockSize, uint8_t protected, void(*dataMonitor)(uint8_t flowDirection, uint32_tdataLength, uint32_tfifoNullCount, uint32_tfifoFullCount))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LUN_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>ioBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>ioBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>baseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>protected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(uint8_t flowDirection, uint32_tdataLength, uint32_tfifoNullCount, uint32_tfifoFullCount)&nbsp;</td>
          <td class="paramname"> <em>dataMonitor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a LUN instance. Must be invoked at least once even no Media is linked. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to the <a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> instance to initialize </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>media</em>&nbsp;</td><td>Media on which the LUN is constructed, set to 0 to disconnect the Media or initialize an ejected LUN. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ioBuffer</em>&nbsp;</td><td>Pointer to a buffer used for read/write operation and which must be blockSize bytes long. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ioBufferSize</em>&nbsp;</td><td>Size of the allocated IO buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseAddress</em>&nbsp;</td><td>Base address of the LUN in number of media blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Total size of the LUN in number of media blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>blockSize</em>&nbsp;</td><td>One block of the LUN in number of media blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>protected</em>&nbsp;</td><td>The LUN area is forced to readonly even the media is writable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataMonitor</em>&nbsp;</td><td>Pointer to a Monitor Function to analyze the flow of this LUN. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1e7757d9187b0f6cc8ea8d503928b909"></a><!-- doxytag: member="MSDLun.c::LUN_Read" ref="ga1e7757d9187b0f6cc8ea8d503928b909" args="(MSDLun *lun, uint32_t blockAddress, void *data, uint32_t length, TransferCallback callback, void *argument)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LUN_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>blockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>argument</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads data from a LUN, starting at the specified block address. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> instance </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>blockAddress</em>&nbsp;</td><td>First block address to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to a data buffer in which to store the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Number of blocks to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Optional callback to invoke when the read finishes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argument</em>&nbsp;</td><td>Optional callback argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Operation result code </dd></dl>

</div>
</div>
<a class="anchor" id="gafc350a85607c66c7e8ceb616ef18c6fa"></a><!-- doxytag: member="MSDLun.c::LUN_Write" ref="gafc350a85607c66c7e8ceb616ef18c6fa" args="(MSDLun *lun, uint32_t blockAddress, void *data, uint32_t length, TransferCallback callback, void *argument)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LUN_Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>blockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usbd__interface.html#gabb63140a294168cea538f0bad09d561a">TransferCallback</a>&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>argument</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes data on the a LUN starting at the specified block address. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> instance </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>blockAddress</em>&nbsp;</td><td>First block address to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to the data to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Number of blocks to write </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Optional callback to invoke when the write finishes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argument</em>&nbsp;</td><td>Optional callback argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Operation result code </dd></dl>

</div>
</div>
<a class="anchor" id="gac202c092099685d21ac19320311b1d0f"></a><!-- doxytag: member="MSDDStateMachine.c::MSDD_StateMachine" ref="gac202c092099685d21ac19320311b1d0f" args="(MSDDriver *pMsdDriver)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDD_StateMachine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> *&nbsp;</td>
          <td class="paramname"> <em>pMsdDriver</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>State machine for the MSD device driver </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsdDriver</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabfb0d71b88e4e5606d3de432127e9d01"></a><!-- doxytag: member="MSDDriver.c::MSDDriver_ConfigurationChangeHandler" ref="gabfb0d71b88e4e5606d3de432127e9d01" args="(uint8_t cfgnum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDDriver_ConfigurationChangeHandler </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>cfgnum</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invoked when the configuration of the device changes. Resets the mass storage driver. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsdDriver</em>&nbsp;</td><td>Pointer to <a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfgnum</em>&nbsp;</td><td>New configuration number. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga77b4a730be820934b4e637afa14e6fef"></a><!-- doxytag: member="MSDDriver.c::MSDDriver_Initialize" ref="ga77b4a730be820934b4e637afa14e6fef" args="(const USBDDriverDescriptors *pDescriptors, MSDLun *pLuns, unsigned char numLuns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDDriver_Initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_u_s_b_d_driver_descriptors.html">USBDDriverDescriptors</a> *&nbsp;</td>
          <td class="paramname"> <em>pDescriptors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>pLuns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>numLuns</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the MSD driver and the associated USB driver. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pDescriptors</em>&nbsp;</td><td>Pointer to Descriptors list for MSD Device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pLuns</em>&nbsp;</td><td>Pointer to a list of LUNs </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numLuns</em>&nbsp;</td><td>Number of LUN in list </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> </dd></dl>

<p>Definition at line <a class="el" href="_m_s_d_driver_8c_source.html#l00066">66</a> of file <a class="el" href="_m_s_d_driver_8c_source.html">MSDDriver.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__usbd__msd_ga77b4a730be820934b4e637afa14e6fef_cgraph.gif" border="0" usemap="#group__usbd__msd_ga77b4a730be820934b4e637afa14e6fef_cgraph" alt=""/></div>
<map name="group__usbd__msd_ga77b4a730be820934b4e637afa14e6fef_cgraph" id="group__usbd__msd_ga77b4a730be820934b4e637afa14e6fef_cgraph">
<area shape="rect" id="node3" href="group__usbd__msd.html#ga462b4263f13e5235a2bedceeaece01cb" title="MSDFunction_Initialize" alt="" coords="192,5,347,35"/><area shape="rect" id="node5" href="group__usbd__interface.html#ga01ba3ff549b968edc152cdb23c2027d1" title="USBD_GetDriver" alt="" coords="211,59,328,88"/><area shape="rect" id="node7" href="group__usbd__interface.html#ga1fd3982402055e37aa879c199e0b7fee" title="USBD_Init" alt="" coords="228,112,311,141"/><area shape="rect" id="node13" href="group__usbd__interface.html#ga127547288f97f428de35e4d816d3c52d" title="USBDDriver_Initialize" alt="" coords="197,165,341,195"/><area shape="rect" id="node9" href="group__usbd__hal.html#ga3699059b9b9b52b7e55af6d070a7fe61" title="USBD_HAL_Init" alt="" coords="425,85,540,115"/><area shape="rect" id="node11" href="usb_2usb__audio__looprec_2main_8c.html#a0ec0fee934fdef57f6e60cf46df2d8c3" title="USBDCallbacks_Initialized" alt="" coords="395,139,571,168"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3fc749f879c284f631bce181e7cfe0eb"></a><!-- doxytag: member="MSDDriver.c::MSDDriver_RequestHandler" ref="ga3fc749f879c284f631bce181e7cfe0eb" args="(const USBGenericRequest *request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDDriver_RequestHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> *&nbsp;</td>
          <td class="paramname"> <em>request</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handler for incoming SETUP requests on default Control endpoint 0.</p>
<p>Standard requests are forwarded to the USBDDriver_RequestHandler method. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsdDriver</em>&nbsp;</td><td>Pointer to <a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gafb1268e0849907894c708ccc4ab46fee"></a><!-- doxytag: member="MSDFunction.c::MSDFunction_Configure" ref="gafb1268e0849907894c708ccc4ab46fee" args="(USBGenericDescriptor *pDescriptors, uint16_t wLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDFunction_Configure </td>
          <td>(</td>
          <td class="paramtype">USBGenericDescriptor *&nbsp;</td>
          <td class="paramname"> <em>pDescriptors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>wLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invoked when the configuration of the device changes. Pass endpoints and resets the mass storage function.  Pointer to the descriptors for function configure.  Length of descriptors in number of bytes. </p>

</div>
</div>
<a class="anchor" id="ga462b4263f13e5235a2bedceeaece01cb"></a><!-- doxytag: member="MSDFunction.c::MSDFunction_Initialize" ref="ga462b4263f13e5235a2bedceeaece01cb" args="(USBDDriver *pUsbd, uint8_t bInterfaceNb, MSDLun *pLuns, uint8_t numLuns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDFunction_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_s_b_d_driver.html">USBDDriver</a> *&nbsp;</td>
          <td class="paramname"> <em>pUsbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>bInterfaceNb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>pLuns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>numLuns</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the MSD driver and the associated USB driver. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pUsbd</em>&nbsp;</td><td>Pointer to <a class="el" href="struct_u_s_b_d_driver.html">USBDDriver</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bInterfaceNb</em>&nbsp;</td><td>Interface number for the function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pLuns</em>&nbsp;</td><td>Pointer to a list of LUNs </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numLuns</em>&nbsp;</td><td>Number of LUN in list </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct_m_s_d_lun.html" title="LUN structure.">MSDLun</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaa87efba32c907fa095c6f8797d2580db"></a><!-- doxytag: member="MSDFunction.c::MSDFunction_RequestHandler" ref="gaa87efba32c907fa095c6f8797d2580db" args="(const USBGenericRequest *request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MSDFunction_RequestHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> *&nbsp;</td>
          <td class="paramname"> <em>request</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handler for incoming SETUP requests on default Control endpoint 0.</p>
<p>Standard requests are forwarded to the USBDDriver_RequestHandler method. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsdDriver</em>&nbsp;</td><td>Pointer to <a class="el" href="struct_m_s_d_driver.html">MSDDriver</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>Pointer to a <a class="el" href="struct_u_s_b_generic_request.html">USBGenericRequest</a> instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga33a2494c76dcc7335a458c79e46975d9"></a><!-- doxytag: member="MSDFunction.c::MSDFunction_StateMachine" ref="ga33a2494c76dcc7335a458c79e46975d9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDFunction_StateMachine </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>State machine for the MSD driver </p>

</div>
</div>
<a class="anchor" id="gaa0225cbda7cc32f11ff4702cee87e80a"></a><!-- doxytag: member="MSDIOFifo.c::MSDIOFifo_Init" ref="gaa0225cbda7cc32f11ff4702cee87e80a" args="(MSDIOFifo *pFifo, void *pBuffer, unsigned short bufferSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSDIOFifo_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_i_o_fifo.html">MSDIOFifo</a> *&nbsp;</td>
          <td class="paramname"> <em>pFifo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&nbsp;</td>
          <td class="paramname"> <em>bufferSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a <a class="el" href="struct_m_s_d_i_o_fifo.html" title="FIFO buffer for READ/WRITE (disk) operation of a mass storage device.">MSDIOFifo</a> instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pFifo</em>&nbsp;</td><td>Pointer to the <a class="el" href="struct_m_s_d_i_o_fifo.html" title="FIFO buffer for READ/WRITE (disk) operation of a mass storage device.">MSDIOFifo</a> instance to initialize </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pBuffer</em>&nbsp;</td><td>Pointer to a buffer used for read/write operation and which must be blockSize bytes aligned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bufferSize</em>&nbsp;</td><td>Total size of the buffer in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2a08f011fbfff2f3a419b28bb6d14b16"></a><!-- doxytag: member="SBCMethods.c::SBC_GetCommandInformation" ref="ga2a08f011fbfff2f3a419b28bb6d14b16" args="(void *command, unsigned int *length, unsigned char *type, MSDLun *lun)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char SBC_GetCommandInformation </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return information about the transfer length and direction expected by the device for a particular command. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>command</em>&nbsp;</td><td>Pointer to a buffer holding the command to evaluate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Expected length of the data transfer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Expected direction of data transfer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to the LUN affected by the command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga64df1e5184c755694de288f6c5dc0dc0"></a><!-- doxytag: member="SBCMethods.c::SBC_ProcessCommand" ref="ga64df1e5184c755694de288f6c5dc0dc0" args="(MSDLun *lun, MSDCommandState *commandState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char SBC_ProcessCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_lun.html">MSDLun</a> *&nbsp;</td>
          <td class="paramname"> <em>lun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_m_s_d_command_state.html">MSDCommandState</a> *&nbsp;</td>
          <td class="paramname"> <em>commandState</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a SBC command by dispatching it to a subfunction. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lun</em>&nbsp;</td><td>Pointer to the affected LUN </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>commandState</em>&nbsp;</td><td>Pointer to the current command state </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Operation result code </dd></dl>

</div>
</div>
<a class="anchor" id="ga6259d674a30286b49d79ffa89b44e809"></a><!-- doxytag: member="SBCMethods.c::SBC_UpdateSenseData" ref="ga6259d674a30286b49d79ffa89b44e809" args="(SBCRequestSenseData *requestSenseData, unsigned char senseKey, unsigned char additionalSenseCode, unsigned char additionalSenseCodeQualifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SBC_UpdateSenseData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_b_c_request_sense_data.html">SBCRequestSenseData</a> *&nbsp;</td>
          <td class="paramname"> <em>requestSenseData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>senseKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>additionalSenseCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>additionalSenseCodeQualifier</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the sense data of a LUN with the given key and codes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>requestSenseData</em>&nbsp;</td><td>Pointer to the sense data to update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>senseKey</em>&nbsp;</td><td>Sense key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>additionalSenseCode</em>&nbsp;</td><td>Additional sense code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>additionalSenseCodeQualifier</em>&nbsp;</td><td>Additional sense code qualifier </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga82b351721c0ee88c194279f372c96b19"></a><!-- doxytag: member="USBDDriverDescriptors.c::msdDriverDescriptors" ref="ga82b351721c0ee88c194279f372c96b19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_u_s_b_d_driver_descriptors.html">USBDDriverDescriptors</a> <a class="el" href="group__usbd__msd.html#ga82b351721c0ee88c194279f372c96b19">msdDriverDescriptors</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {

    &amp;<a class="code" href="group__usbd__audio__speakerphone.html#ga384638d07384b7d12bfd2ba2f830dff8">deviceDescriptor</a>,
    (USBConfigurationDescriptor *) &amp;<a class="code" href="group__usbd__cdc.html#gafd15c3aa6fce2192be56c41854338f2d">configurationDescriptorsFS</a>,
    &amp;qualifierDescriptor,
    (USBConfigurationDescriptor *) &amp;<a class="code" href="group__usbd__cdc.html#ga376315c1b4e003df2dfe18befb9e8194">otherSpeedDescriptorsFS</a>,
    0, 
    (USBConfigurationDescriptor *) &amp;<a class="code" href="group__usbd__cdc.html#gab73f4350883f3572d8ef277b02b6c147">configurationDescriptorsHS</a>,
    &amp;qualifierDescriptor,
    (USBConfigurationDescriptor *) &amp;<a class="code" href="group__usbd__cdc.html#ga0055b7cb8679462883c4a3bdf81f170a">otherSpeedDescriptorsHS</a>,
    <a class="code" href="group__usbd__audio__speakerphone.html#ga5af83d39e0236d7188ba8e18b3c9a7c6">stringDescriptors</a>,
    4 

}
</pre></div><p>List of the standard descriptors used by the Mass Storage driver. </p>

<p>Definition at line <a class="el" href="usb__massstorage_2_u_s_b_d_driver_descriptors_8c_source.html#l00421">421</a> of file <a class="el" href="usb__massstorage_2_u_s_b_d_driver_descriptors_8c_source.html">USBDDriverDescriptors.c</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
